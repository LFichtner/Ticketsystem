TestInitialisation = function (mongodb) {
    var DBAccess = require('backend/DBAccess.js');
    var MyDBAccess = new DBAccess(mongodb);
    
    this.initDB = function (data, res) {
        if (data.password == 'x43f65ld23io1d00se234fgt642') {
            MyDBAccess.clearDatabase(function () {
                MyDBAccess.createDataset('user', data.params.users, function (resultDBAccess) {
                    MyDBAccess.createDataset('ticket', data.params.tickets, function (resultDBAccess) {
                        MyDBAccess.createDataset('filter', data.params.filters, function (resultDBAccess) {
                            MyDBAccess.createDataset('projekt', data.params.projekts, function (resultDBAccess) {
                                res.send(JSON.stringify(data.initTestDataResultObj));
                            });
                        });
                    });
                });
            });
        }
    };
};

try {
    module.exports = function () {
        return TestInitialisation;
    }();
} catch (e) {

}